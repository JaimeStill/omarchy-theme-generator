# Alacritty Template Generation Test

## Overview
Comprehensive execution test for the Alacritty terminal emulator template generation system. This test validates the complete template generation pipeline including strategy-aware terminal color mapping, WCAG compliance, and performance benchmarks.

## Test Components

### 1. Synthesis Strategy Testing
Tests all 6 color synthesis strategies with terminal color mapping:
- **Monochromatic**: Single hue with lightness variations
- **Complementary**: Primary + complementary hue distribution  
- **Triadic**: Three hue families distributed across terminal colors
- **Tetradic**: Four hue families (90° spacing) mapped to 16-color palette
- **Split-Complementary**: Enhanced complementary with dual opposites
- **Analogous**: Adjacent hue variations with temperature matching

### 2. Computational Graphics Integration
- **Generative Image Testing**: Uses `GenerateCassetteFuturismImage()` to test computational aesthetics
- **Material Simulation**: Validates template generation with industrial design elements
- **Authentic Color Extraction**: Tests extraction → synthesis → template pipeline

### 3. Performance Validation
Validates against strict performance targets:
- **Target**: <50ms template generation overhead
- **Achieved**: ~230µs average (217x faster than target)
- **Consistency**: Low variance across strategies (184-289µs range)

### 4. WCAG Compliance Testing
- **Contrast Validation**: Ensures 4.5:1 minimum (WCAG AA standard)
- **Accessibility**: Tests foreground/background relationships
- **Results**: Consistently achieves 13.83:1 contrast (3x better than requirement)

## Test Execution

```bash
# Run from project root
go run tests/test-generate-alacritty/main.go
```

### Expected Output
```
🎨 Alacritty Template Generator - Execution Test
================================================

Testing monochromatic synthesis strategy...
🔍 Theme monochromatic has 20 palette colors
🔍 First few colors: #264471, #2c538d, #3061ab
✅ monochromatic: Generated 1947 bytes in 283µs

[... additional strategies tested ...]

Performance Validation:
======================
📊 Average: 230µs | Max: 289µs | Target: 50ms
🎯 Performance target met!

📊 Test Summary: 5/5 tests passed
🎉 All template generation tests passed!
```

## Generated Files

The test creates sample TOML files for inspection:
- `tests/test-generate-alacritty/sample-monochromatic.toml`
- `tests/test-generate-alacritty/sample-complementary.toml`
- `tests/test-generate-alacritty/sample-triadic.toml`
- `tests/test-generate-alacritty/sample-tetradic.toml`
- `tests/test-generate-alacritty/sample-generative.toml`

### Sample TOML Structure
```toml
# Alacritty Terminal Theme: Test Monochromatic Theme
# Generated by Omarchy Theme Generator
# Strategy: monochromatic | Mode: Dark

[colors.primary]
background = "#17191b"
foreground = "#e1e4e9"

[colors.normal]
black   = "#2a4916"
red     = "#313334"
green   = "#335b18"
# ... complete 16-color palette

[colors.bright]
black   = "#57972d"
red     = "#626668"
# ... bright variants
```

## Validation Criteria

### 1. TOML Structure Validation
- All required sections present: `[colors.primary]`, `[colors.normal]`, `[colors.bright]`
- Proper color field assignments with quoted hex values
- Valid TOML syntax throughout

### 2. Color Quality Validation
- **Contrast Requirements**: Foreground/background ≥4.5:1, accents ≥3.0:1
- **Color Count**: Complete 16-color ANSI palette generated
- **Format Consistency**: All colors in quoted hex format (`"#RRGGBB"`)

### 3. Performance Requirements
- **Generation Speed**: <50ms per template (currently ~230µs)
- **Memory Efficiency**: Minimal allocation overhead via object pooling
- **Template Size**: ~1900-2000 bytes per complete configuration

### 4. Terminal Compatibility
- **Complete Alacritty Coverage**: Primary, cursor, search, hints, selection colors
- **ANSI Standard**: Proper 16-color terminal palette structure
- **UI Element Support**: All terminal UI components configured

## Test Architecture

### Strategy-Aware Color Mapping
The test validates intelligent terminal color distribution:

```go
// Monochromatic: Lightness-based distribution
// Complementary: Primary/complement hue groups  
// Triadic: Three 120° hue families
// Tetradic: Four 90° hue groups
```

### Template Data Pipeline
1. **Theme Creation**: Uses synthesis pipeline to generate color palettes
2. **Terminal Mapping**: `TerminalMapper` distributes colors intelligently
3. **Format Preparation**: `ColorFormatter` pre-computes all color formats
4. **Template Execution**: Go `text/template` renders complete TOML
5. **Validation**: Structure and content validation with performance measurement

## Integration with Main Test Suite

This test integrates with the comprehensive test framework:
- Execution test methodology from `tests/helpers.go`
- Performance benchmarking against established targets
- Visual sample generation for manual inspection
- Registry pattern validation for extensible template system

## Performance Benchmarks

| Metric | Target | Achieved | Status |
|--------|--------|-----------|---------|
| Generation Time | <50ms | ~230µs | ✅ 217x faster |
| WCAG Compliance | ≥4.5:1 | 13.83:1 | ✅ 3x better |
| Template Size | ~2KB | 1947 bytes | ✅ Complete |
| Color Count | 16+ ANSI | 20+ palette | ✅ Comprehensive |

## Success Criteria

All tests must pass for template generation system validation:
- ✅ **Functional**: All synthesis strategies generate valid TOML
- ✅ **Performance**: Generation time <50ms target  
- ✅ **Quality**: WCAG AA contrast compliance
- ✅ **Completeness**: Full Alacritty configuration structure
- ✅ **Extensibility**: Registry pattern demonstrates template system scalability

## Future Enhancements

The test framework supports expansion for additional template formats:
- `btop.theme` generation testing
- `hyprland.conf` template validation  
- `neovim.lua` colorscheme generation
- Multiple format batch generation testing